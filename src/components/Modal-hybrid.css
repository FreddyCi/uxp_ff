/*!
 * Hybrid Modal Component - Spectrum CSS + Nuclear Div Approach
 * Matches official Spectrum modal selectors with UXP-safe overrides
 */

/* =============================================================================
   UNDERLAY (optional backdrop)
   ============================================================================= */

div[data-uxp-modal-underlay].uxp-reset--complete.spectrum-Underlay {
  all: unset !important;
  position: fixed !important;
  inset: 0 !important;
  background-color: rgba(15, 15, 15, 0.45) !important;
  opacity: 0 !important;
  pointer-events: none !important;
  transition: opacity var(--spectrum-animation-duration-100, 160ms) ease-out !important;
  z-index: 1 !important;
}

div[data-uxp-modal-underlay].uxp-reset--complete.spectrum-Underlay.is-open {
  opacity: 1 !important;
  pointer-events: auto !important;
}

/* =============================================================================
   WRAPPER (positions the modal)
   ============================================================================= */

div[data-uxp-modal-wrapper].uxp-reset--complete.spectrum-Modal-wrapper {
  all: unset !important;
  position: fixed !important;
  inset-inline-start: 0 !important;
  inset-block-start: 0 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  box-sizing: border-box !important;
  inline-size: 100vw !important;
  block-size: 100vh !important;
  block-size: -webkit-fill-available !important;
  block-size: stretch !important;
  visibility: hidden !important;
  pointer-events: none !important;
  z-index: 2 !important;
  transition: visibility 0ms linear var(--mod-modal-transition-animation-duration, var(--spectrum-animation-duration-100, 120ms)) !important;
  padding: var(--spectrum-spacing-400, 32px) !important;
}

div[data-uxp-modal-wrapper].uxp-reset--complete.spectrum-Modal-wrapper.is-open {
  visibility: visible !important;
  pointer-events: auto !important;
}

/* =============================================================================
   MODAL CONTAINER
   ============================================================================= */

div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal {
  all: unset !important;
  position: relative !important;
  box-sizing: border-box !important;
  display: flex !important;
  flex-direction: column !important;
  gap: var(--spectrum-spacing-200, 16px) !important;
  opacity: 0 !important;
  visibility: hidden !important;
  transform: translateY(var(--mod-modal-confirm-entry-animation-distance, var(--spectrum-dialog-confirm-entry-animation-distance, 16px))) !important;
  background: var(--mod-modal-background-color, var(--spectrum-modal-background-color, var(--spectrum-background-layer-2-color, #ffffff))) !important;
  border-radius: var(--mod-modal-confirm-border-radius, var(--spectrum-corner-radius-200, 12px)) !important;
  box-shadow: 0 24px 48px rgba(15, 23, 42, 0.22) !important;
  color: var(--spectrum-neutral-content-color-default, #161616) !important;
  max-inline-size: min(640px, 90vw) !important;
  max-block-size: var(--mod-modal-max-height, 90vh) !important;
  padding: var(--spectrum-spacing-300, 24px) !important;
  pointer-events: auto !important;
  overflow: hidden !important;
  transition:
    transform var(--spectrum-modal-confirm-entry-animation-duration, 200ms) var(--spectrum-animation-ease-out, cubic-bezier(0.2, 0, 0.38, 0.9)) var(--spectrum-modal-confirm-entry-animation-delay, 0ms),
    opacity var(--spectrum-modal-confirm-entry-animation-duration, 200ms) var(--spectrum-animation-ease-out, cubic-bezier(0.2, 0, 0.38, 0.9)) var(--spectrum-modal-confirm-entry-animation-delay, 0ms) !important;
}

div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal.is-open {
  opacity: 1 !important;
  visibility: visible !important;
  transform: translateY(0) !important;
}

/* Responsive full-bleed option */
div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal.spectrum-Modal--responsive {
  inline-size: min(640px, 100%) !important;
}

/* Fullscreen variants */
div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal.spectrum-Modal--fullscreen {
  position: fixed !important;
  inset-inline-start: var(--spectrum-spacing-600, 32px) !important;
  inset-inline-end: var(--spectrum-spacing-600, 32px) !important;
  inset-block-start: var(--spectrum-spacing-600, 32px) !important;
  inset-block-end: var(--spectrum-spacing-600, 32px) !important;
  max-inline-size: none !important;
  max-block-size: none !important;
}

div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal.spectrum-Modal--fullscreenTakeover {
  position: fixed !important;
  inset: 0 !important;
  max-inline-size: none !important;
  max-block-size: none !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  transform: none !important;
}

div[data-uxp-modal-wrapper].uxp-reset--complete.spectrum-Modal-wrapper .spectrum-Modal.spectrum-Modal--fullscreenTakeover.is-open {
  transform: none !important;
}

/* Small viewports - responsive fills screen */
@media only screen and (max-width: 400px), only screen and (max-height: 350px) {
  div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal.spectrum-Modal--responsive {
    inline-size: 100% !important;
    block-size: 100% !important;
    max-inline-size: 100% !important;
    max-block-size: 100% !important;
    border-radius: 0 !important;
  }

  div[data-uxp-modal-wrapper].uxp-reset--complete.spectrum-Modal-wrapper .spectrum-Modal.spectrum-Modal--responsive {
    margin-block-start: 0 !important;
  }
}

/* =============================================================================
   HEADER & CLOSE BUTTON
   ============================================================================= */

div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal .spectrum-Modal-header {
  display: flex !important;
  align-items: flex-start !important;
  justify-content: space-between !important;
  gap: var(--spectrum-spacing-200, 16px) !important;
  margin-inline: -4px !important;
}

div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal .spectrum-Modal-headerTitle {
  all: unset !important;
  font-family: var(--spectrum-sans-font-family-stack) !important;
  font-size: var(--spectrum-heading-size-m, 22px) !important;
  font-weight: 600 !important;
  color: inherit !important;
  flex: 1 1 auto !important;
  line-height: 1.25 !important;
}

div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal .spectrum-Modal-closeButton {
  margin-inline-start: auto !important;
}

div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal .spectrum-Modal-closeButton .spectrum-Button-label {
  padding-inline: var(--spectrum-spacing-150, 12px) !important;
}

/* =============================================================================
   CONTENT AREA
   ============================================================================= */

div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal .spectrum-Modal-content {
  display: flex !important;
  flex-direction: column !important;
  gap: var(--spectrum-spacing-200, 16px) !important;
  font-size: var(--spectrum-body-size-m, 14px) !important;
  line-height: 1.6 !important;
  color: inherit !important;
}

div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal .spectrum-Modal-description {
  margin: 0 !important;
  color: var(--spectrum-neutral-content-color-strong, #4b5563) !important;
  font-size: inherit !important;
}

/* =============================================================================
   FOOTER & ACTIONS
   ============================================================================= */

div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal .spectrum-Modal-footer {
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  gap: var(--spectrum-spacing-200, 16px) !important;
  padding-top: var(--spectrum-spacing-200, 16px) !important;
  border-top: 1px solid rgba(15, 23, 42, 0.08) !important;
}

div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal .spectrum-Modal-footerActions {
  display: flex !important;
  align-items: center !important;
  gap: var(--spectrum-spacing-150, 12px) !important;
  margin-inline-start: auto !important;
}

/* =============================================================================
   DARK THEME SUPPORT
   ============================================================================= */

.spectrum--dark div[data-uxp-modal-underlay].uxp-reset--complete.spectrum-Underlay,
.spectrum--darkest div[data-uxp-modal-underlay].uxp-reset--complete.spectrum-Underlay,
[data-color-scheme="dark"] div[data-uxp-modal-underlay].uxp-reset--complete.spectrum-Underlay {
  background-color: rgba(4, 6, 12, 0.65) !important;
}

.spectrum--dark div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal,
.spectrum--darkest div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal,
[data-color-scheme="dark"] div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal {
  background: var(--spectrum-modal-background-color, #1f2933) !important;
  color: var(--spectrum-neutral-content-color-strong, #f9fafb) !important;
  border: 1px solid rgba(255, 255, 255, 0.08) !important;
}

.spectrum--dark div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal .spectrum-Modal-description,
.spectrum--darkest div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal .spectrum-Modal-description,
[data-color-scheme="dark"] div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal .spectrum-Modal-description {
  color: rgba(241, 245, 249, 0.85) !important;
}

.spectrum--dark div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal .spectrum-Modal-footer,
.spectrum--darkest div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal .spectrum-Modal-footer,
[data-color-scheme="dark"] div[role="dialog"].uxp-reset--complete.spectrum-Modal.spectrum-Modal .spectrum-Modal-footer {
  border-top: 1px solid rgba(255, 255, 255, 0.08) !important;
}
