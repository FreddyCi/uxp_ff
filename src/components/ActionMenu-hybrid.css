/* ActionMenu - Hybrid Nuclear Div CSS */
/* Nuclear div approach for ultra-high specificity in UXP environments */
/* This ActionMenu uses ActionButton components for menu items */

/* Base ActionMenu container */
.uxp-reset--complete.spectrum-ActionMenu {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* ActionButton trigger container */
.uxp-reset--complete.spectrum-ActionMenu > div:first-child {
  position: relative;
}

/* Popover container */
.uxp-reset--complete.spectrum-Popover.spectrum-ActionMenu-popover {
  position: absolute;
  z-index: 1000;
  box-sizing: border-box;
  min-width: var(--spectrum-popover-min-width, 160px);
  background-color: var(--spectrum-popover-background-color, #ffffff);
  border: var(--spectrum-popover-border-width, 1px) solid var(--spectrum-popover-border-color, #d3d3d3);
  border-radius: var(--spectrum-popover-corner-radius, 4px);
  box-shadow: var(--spectrum-popover-drop-shadow, 0 2px 10px rgba(0, 0, 0, 0.15));
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.13s ease-in-out, visibility 0.13s ease-in-out;
  /* Ensure background is always visible */
  backdrop-filter: blur(0);
}

/* Popover open state */
.uxp-reset--complete.spectrum-Popover.spectrum-ActionMenu-popover.is-open {
  opacity: 1;
  visibility: visible;
}

/* Popover size variants */
.uxp-reset--complete.spectrum-Popover.spectrum-ActionMenu-popover.spectrum-Popover--sizeXS {
  min-width: var(--spectrum-popover-min-width-xs, 120px);
}

.uxp-reset--complete.spectrum-Popover.spectrum-ActionMenu-popover.spectrum-Popover--sizeS {
  min-width: var(--spectrum-popover-min-width-s, 140px);
}

.uxp-reset--complete.spectrum-Popover.spectrum-ActionMenu-popover.spectrum-Popover--sizeM {
  min-width: var(--spectrum-popover-min-width-m, 160px);
}

.uxp-reset--complete.spectrum-Popover.spectrum-ActionMenu-popover.spectrum-Popover--sizeL {
  min-width: var(--spectrum-popover-min-width-l, 180px);
}

.uxp-reset--complete.spectrum-Popover.spectrum-ActionMenu-popover.spectrum-Popover--sizeXL {
  min-width: var(--spectrum-popover-min-width-xl, 200px);
}

/* Popover direction positioning */
.uxp-reset--complete.spectrum-Popover.spectrum-ActionMenu-popover.spectrum-Popover--bottom {
  top: 100%;
  margin-top: var(--spectrum-popover-offset, 4px);
}

.uxp-reset--complete.spectrum-Popover.spectrum-ActionMenu-popover.spectrum-Popover--top {
  bottom: 100%;
  margin-bottom: var(--spectrum-popover-offset, 4px);
}

.uxp-reset--complete.spectrum-Popover.spectrum-ActionMenu-popover.spectrum-Popover--left {
  right: 100%;
  margin-right: var(--spectrum-popover-offset, 4px);
}

.uxp-reset--complete.spectrum-Popover.spectrum-ActionMenu-popover.spectrum-Popover--right {
  left: 100%;
  margin-left: var(--spectrum-popover-offset, 4px);
}

/* Menu container */
.uxp-reset--complete.spectrum-ActionMenu-menu {
  display: flex;
  flex-direction: column;
  padding: var(--spectrum-menu-padding, 4px);
  min-width: 100%;
  box-sizing: border-box;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.13s ease-in-out, visibility 0.13s ease-in-out;
  gap: var(--spectrum-menu-item-gap, 2px);
  /* Ensure menu has proper background inheritance */
  background-color: inherit;
}

/* Menu open state */
.uxp-reset--complete.spectrum-ActionMenu-menu.is-open {
  opacity: 1;
  visibility: visible;
}

/* ActionButton menu items */
.uxp-reset--complete.spectrum-ActionMenu-menu .spectrum-ActionMenu-item {
  width: 100%;
  justify-content: flex-start;
  margin: 0;
}

/* Ensure ActionButtons in menu fill width and align left */
.uxp-reset--complete.spectrum-ActionMenu-menu .spectrum-ActionMenu-item .spectrum-ActionButton {
  width: 100%;
  justify-content: flex-start;
  text-align: left;
  border-radius: var(--spectrum-menu-item-border-radius, 2px);
}

/* Menu size variants - adjust item sizing */
.uxp-reset--complete.spectrum-ActionMenu-menu.spectrum-ActionMenu--sizeXS {
  padding: var(--spectrum-menu-padding-xs, 2px);
  gap: var(--spectrum-menu-item-gap-xs, 1px);
}

.uxp-reset--complete.spectrum-ActionMenu-menu.spectrum-ActionMenu--sizeS {
  padding: var(--spectrum-menu-padding-s, 3px);
  gap: var(--spectrum-menu-item-gap-s, 1px);
}

.uxp-reset--complete.spectrum-ActionMenu-menu.spectrum-ActionMenu--sizeM {
  padding: var(--spectrum-menu-padding-m, 4px);
  gap: var(--spectrum-menu-item-gap-m, 2px);
}

.uxp-reset--complete.spectrum-ActionMenu-menu.spectrum-ActionMenu--sizeL {
  padding: var(--spectrum-menu-padding-l, 5px);
  gap: var(--spectrum-menu-item-gap-l, 2px);
}

.uxp-reset--complete.spectrum-ActionMenu-menu.spectrum-ActionMenu--sizeXL {
  padding: var(--spectrum-menu-padding-xl, 6px);
  gap: var(--spectrum-menu-item-gap-xl, 3px);
}

/* Ensure proper layering when ActionMenu is used with other components */
.uxp-reset--complete.spectrum-ActionMenu .spectrum-ActionMenu-popover {
  z-index: 1001;
}

/* Dark theme support */
@media (prefers-color-scheme: dark) {
  .uxp-reset--complete.spectrum-Popover.spectrum-ActionMenu-popover {
    background-color: var(--spectrum-popover-background-color-dark, #323232);
    border-color: var(--spectrum-popover-border-color-dark, #5a5a5a);
    box-shadow: var(--spectrum-popover-drop-shadow-dark, 0 2px 10px rgba(0, 0, 0, 0.3));
  }
}

/* Fallback for environments without CSS custom properties */
.uxp-reset--complete.spectrum-Popover.spectrum-ActionMenu-popover {
  background: #ffffff !important;
  border: 1px solid #d3d3d3 !important;
}

@media (prefers-color-scheme: dark) {
  .uxp-reset--complete.spectrum-Popover.spectrum-ActionMenu-popover {
    background: #323232 !important;
    border: 1px solid #5a5a5a !important;
  }
}