/*
 * Hybrid StepList Component - Spectrum CSS alignment with UXP compatible markup
 */

:root {
  --uxp-steplist-marker-size: var(--spectrum-steplist-marker-diameter, 16px);
  --uxp-steplist-marker-hit-area: var(--spectrum-steplist-marker-hitArea, 32px);
  --uxp-steplist-segment-height: var(--spectrum-steplist-segment-height, 2px);
  --uxp-steplist-label-font-size: var(--spectrum-steplist-label-text-size, 14px);
  --uxp-steplist-label-offset: var(--spectrum-steplist-label-labelOffset, 12px);
}

div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist {
  all: unset !important;
  display: flex !important;
  align-items: flex-start !important;
  gap: var(--spectrum-steplist-step-width, 40px) !important;
  width: 100% !important;
  padding-block: var(--spectrum-steplist-topPadding, 16px) !important;
  padding-inline: var(--spectrum-steplist-sidePadding, 0) !important;
  box-sizing: border-box !important;
  list-style: none !important;
}

div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist.spectrum-Steplist--small {
  padding-block: var(--spectrum-steplist-small-topPadding, 12px) !important;
  gap: var(--spectrum-spacing-300, 12px) !important;
}

div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist .spectrum-Steplist-item {
  position: relative !important;
  display: flex !important;
  align-items: center !important;
  min-width: 0 !important;
  flex: 1 1 0 !important;
  column-gap: var(--uxp-steplist-label-offset) !important;
  color: var(--spectrum-steplist-incomplete-label-color, rgba(15, 23, 42, 0.65)) !important;
}

div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist .spectrum-Steplist-label {
  font-family: var(--spectrum-sans-font-family-stack) !important;
  font-size: var(--uxp-steplist-label-font-size) !important;
  font-weight: var(--spectrum-regular-font-weight, 400) !important;
  color: inherit !important;
  letter-spacing: 0 !important;
  white-space: nowrap !important;
}

div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist .spectrum-Steplist-markerContainer {
  width: var(--uxp-steplist-marker-hit-area) !important;
  height: var(--uxp-steplist-marker-hit-area) !important;
  min-width: var(--uxp-steplist-marker-hit-area) !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  position: relative !important;
}

div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist .spectrum-Steplist-marker {
  display: block !important;
  width: var(--uxp-steplist-marker-size) !important;
  height: var(--uxp-steplist-marker-size) !important;
  border-radius: var(--uxp-steplist-marker-size) !important;
  border: 2px solid var(--spectrum-steplist-incomplete-marker-border-color, rgba(15, 23, 42, 0.3)) !important;
  background-color: var(--spectrum-component-background-color-transparent, transparent) !important;
  transition: background-color var(--spectrum-animation-duration-100, 0.16s) ease-out,
    border-color var(--spectrum-animation-duration-100, 0.16s) ease-out !important;
}

div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist .spectrum-Steplist-segment {
  position: absolute !important;
  inset-inline-start: calc(100% - var(--uxp-steplist-marker-hit-area) / 2) !important;
  inset-inline-end: calc(var(--uxp-steplist-marker-hit-area) * -0.5) !important;
  inset-block-start: 50% !important;
  height: var(--uxp-steplist-segment-height) !important;
  transform: translateY(-50%) !important;
  background-color: var(--spectrum-steplist-incomplete-segment-border-block-end-color, rgba(15, 23, 42, 0.2)) !important;
  pointer-events: none !important;
}

div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist .spectrum-Steplist-item:last-child .spectrum-Steplist-segment {
  display: none !important;
}

/* Complete state */
div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist .spectrum-Steplist-item.is-complete {
  color: var(--spectrum-steplist-complete-label-text-color, rgba(15, 23, 42, 0.95)) !important;
}

div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist .spectrum-Steplist-item.is-complete .spectrum-Steplist-marker {
  border-color: var(--spectrum-steplist-complete-marker-background-color, rgb(59, 130, 246)) !important;
  background-color: var(--spectrum-steplist-complete-marker-background-color, rgb(59, 130, 246)) !important;
}

div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist .spectrum-Steplist-item.is-complete .spectrum-Steplist-segment {
  background-color: var(--spectrum-steplist-complete-segment-border-block-end-color, rgba(59, 130, 246, 0.7)) !important;
}

/* Current/selected state */
div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist .spectrum-Steplist-item.is-selected {
  color: var(--spectrum-steplist-current-label-text-color, rgb(15, 23, 42)) !important;
}

div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist .spectrum-Steplist-item.is-selected .spectrum-Steplist-marker {
  border-color: var(--spectrum-steplist-current-marker-color, rgb(59, 130, 246)) !important;
  background-color: var(--spectrum-component-background-color-default, rgb(255, 255, 255)) !important;
}

/* Interactive variant */
div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist.spectrum-Steplist--interactive .spectrum-Steplist-link {
  all: unset !important;
  display: inline-flex !important;
  align-items: center !important;
  column-gap: var(--uxp-steplist-label-offset) !important;
  cursor: pointer !important;
  border-radius: var(--uxp-steplist-marker-hit-area) !important;
  padding-inline: calc(var(--uxp-steplist-label-offset) * 0.5) !important;
}

div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist.spectrum-Steplist--interactive .spectrum-Steplist-link:focus-visible {
  outline: none !important;
  box-shadow: 0 0 0 var(--spectrum-focus-indicator-thickness, 2px) var(--spectrum-focus-indicator-color, rgb(37, 99, 235)) !important;
}

div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist.spectrum-Steplist--interactive .spectrum-Steplist-link:hover .spectrum-Steplist-marker {
  border-color: var(--spectrum-steplist-current-marker-color, rgb(59, 130, 246)) !important;
}

div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist.spectrum-Steplist--interactive .spectrum-Steplist-link:active .spectrum-Steplist-marker {
  border-color: var(--spectrum-steplist-current-marker-color-key-focus, rgb(37, 99, 235)) !important;
}

/* Dark theme overrides */
[data-theme="dark"] div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist {
  color: var(--spectrum-neutral-content-color-default, rgba(226, 232, 240, 0.75)) !important;
}

[data-theme="dark"] div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist .spectrum-Steplist-marker {
  border-color: var(--spectrum-steplist-incomplete-marker-border-color, rgba(226, 232, 240, 0.35)) !important;
}

[data-theme="dark"] div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist .spectrum-Steplist-segment {
  background-color: var(--spectrum-steplist-incomplete-segment-border-block-end-color, rgba(226, 232, 240, 0.25)) !important;
}

[data-theme="dark"] div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist .spectrum-Steplist-item.is-complete {
  color: var(--spectrum-steplist-complete-label-text-color, rgba(248, 250, 252, 0.95)) !important;
}

[data-theme="dark"] div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist .spectrum-Steplist-item.is-complete .spectrum-Steplist-marker {
  background-color: var(--spectrum-steplist-complete-marker-background-color, rgb(96, 165, 250)) !important;
  border-color: var(--spectrum-steplist-complete-marker-background-color, rgb(96, 165, 250)) !important;
}

[data-theme="dark"] div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist .spectrum-Steplist-item.is-selected {
  color: var(--spectrum-steplist-current-label-text-color, rgb(248, 250, 252)) !important;
}

[data-theme="dark"] div[role="list"].uxp-reset--complete.spectrum-Steplist.spectrum-Steplist .spectrum-Steplist-item.is-selected .spectrum-Steplist-marker {
  border-color: var(--spectrum-steplist-current-marker-color, rgb(96, 165, 250)) !important;
}
